# $Id: setversion,v 1.6 2009-09-26 02:20:55 joostvb Exp $

# This script is free software; you can distribute it and/or modify it
# under the terms of the GNU GPL.  See the file COPYING.

if test -e stamp.day -a -e stamp.month -a -e stamp.year
then
    # user has overwritten autogenerated version
    date=$( echo -n $(cat stamp.year); echo -n $(cat stamp.month); echo -n $(cat stamp.day) )
    echo $date >VERSION
    echo 'm4_define([CASPAR_VERSION], ['$date'])' > VERSION.m4
else
    echo 'm4_define([CASPAR_VERSION], ['`date +%Y%m%d`'])' > VERSION.m4
    # compatibility with other mdcc.cx/ad1810 packages
    date +%Y%m%d > VERSION

    # zoem stuff
    date +%e > stamp.day
    date +%b > stamp.month
    date +%Y > stamp.year
fi
